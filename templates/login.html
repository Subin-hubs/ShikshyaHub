<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign In â€” ShikshyaHub</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
</head>
<body>

<!-- Background -->
<div class="login-bg"></div>
<div class="blob blob-1"></div>
<div class="blob blob-2"></div>
<div class="blob blob-3"></div>

<!-- Dark mode toggle (fixed) -->
<button class="login-theme-toggle" id="themeToggle" title="Toggle theme">ğŸŒ™</button>

<!-- â”€â”€ Card â”€â”€ -->
<div class="login-card">

  <!-- LEFT: Illustration panel -->
  <div class="login-left">
    <div class="left-logo">
      <div class="left-logo-icon">S</div>
      <div class="left-logo-text">Shikshya<span>Hub</span></div>
    </div>

    <!-- Dashboard SVG Illustration -->
    <div class="left-illustration">
      <svg viewBox="0 0 380 280" xmlns="http://www.w3.org/2000/svg" style="width:100%;border-radius:16px;drop-shadow(0 20px 40px rgba(0,0,0,0.4));">
        <!-- bg -->
        <rect width="380" height="280" rx="14" fill="#0d1b35"/>
        <!-- topbar -->
        <rect x="0" y="0" width="380" height="44" rx="14" fill="rgba(255,255,255,0.06)"/>
        <rect x="14" y="14" width="16" height="16" rx="4" fill="#c4962a"/>
        <rect x="38" y="17" width="60" height="10" rx="3" fill="rgba(255,255,255,0.5)"/>
        <circle cx="356" cy="22" r="8" fill="rgba(255,255,255,0.1)"/>
        <circle cx="336" cy="22" r="8" fill="rgba(196,150,42,0.3)"/>
        <!-- sidebar dots -->
        <rect x="0" y="44" width="60" height="236" rx="0" fill="rgba(255,255,255,0.04)"/>
        <circle cx="30" cy="70" r="6" fill="rgba(196,150,42,0.5)"/>
        <circle cx="30" cy="94" r="6" fill="rgba(255,255,255,0.2)"/>
        <circle cx="30" cy="118" r="6" fill="rgba(255,255,255,0.2)"/>
        <circle cx="30" cy="142" r="6" fill="rgba(255,255,255,0.2)"/>
        <circle cx="30" cy="166" r="6" fill="rgba(255,255,255,0.2)"/>
        <!-- stat cards -->
        <rect x="72" y="56" width="72" height="52" rx="8" fill="rgba(196,150,42,0.15)" stroke="rgba(196,150,42,0.3)" stroke-width="1"/>
        <text x="108" y="80" text-anchor="middle" fill="#e8b84b" font-family="DM Sans" font-size="14" font-weight="700">142</text>
        <text x="108" y="97" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-family="DM Sans" font-size="8">Students</text>
        <rect x="152" y="56" width="72" height="52" rx="8" fill="rgba(56,161,105,0.15)" stroke="rgba(56,161,105,0.3)" stroke-width="1"/>
        <text x="188" y="80" text-anchor="middle" fill="#68d391" font-family="DM Sans" font-size="14" font-weight="700">94%</text>
        <text x="188" y="97" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-family="DM Sans" font-size="8">Attendance</text>
        <rect x="232" y="56" width="72" height="52" rx="8" fill="rgba(49,130,206,0.15)" stroke="rgba(49,130,206,0.3)" stroke-width="1"/>
        <text x="268" y="80" text-anchor="middle" fill="#63b3ed" font-family="DM Sans" font-size="14" font-weight="700">28</text>
        <text x="268" y="97" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-family="DM Sans" font-size="8">Subjects</text>
        <rect x="312" y="56" width="56" height="52" rx="8" fill="rgba(229,62,62,0.15)" stroke="rgba(229,62,62,0.3)" stroke-width="1"/>
        <text x="340" y="80" text-anchor="middle" fill="#fc8181" font-family="DM Sans" font-size="14" font-weight="700">6</text>
        <text x="340" y="97" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-family="DM Sans" font-size="8">Pending</text>
        <!-- chart area -->
        <rect x="72" y="118" width="130" height="100" rx="8" fill="rgba(255,255,255,0.04)" stroke="rgba(255,255,255,0.08)" stroke-width="1"/>
        <text x="137" y="134" text-anchor="middle" fill="rgba(255,255,255,0.6)" font-family="DM Sans" font-size="8" font-weight="600">ATTENDANCE CHART</text>
        <rect x="84" y="175" width="14" height="32" rx="3" fill="rgba(196,150,42,0.7)"/>
        <rect x="102" y="162" width="14" height="45" rx="3" fill="rgba(196,150,42,0.8)"/>
        <rect x="120" y="155" width="14" height="52" rx="3" fill="rgba(196,150,42,0.9)"/>
        <rect x="138" y="168" width="14" height="39" rx="3" fill="rgba(196,150,42,0.65)"/>
        <rect x="156" y="150" width="14" height="57" rx="3" fill="#c4962a"/>
        <rect x="174" y="160" width="14" height="47" rx="3" fill="rgba(196,150,42,0.75)"/>
        <!-- notice list -->
        <rect x="210" y="118" width="158" height="100" rx="8" fill="rgba(255,255,255,0.04)" stroke="rgba(255,255,255,0.08)" stroke-width="1"/>
        <text x="289" y="134" text-anchor="middle" fill="rgba(255,255,255,0.6)" font-family="DM Sans" font-size="8" font-weight="600">RECENT NOTICES</text>
        <rect x="220" y="141" width="8" height="8" rx="2" fill="rgba(196,150,42,0.7)"/>
        <rect x="232" y="143" width="100" height="4" rx="2" fill="rgba(255,255,255,0.25)"/>
        <rect x="232" y="150" width="70" height="3" rx="2" fill="rgba(255,255,255,0.12)"/>
        <rect x="220" y="161" width="8" height="8" rx="2" fill="rgba(56,161,105,0.7)"/>
        <rect x="232" y="163" width="90" height="4" rx="2" fill="rgba(255,255,255,0.25)"/>
        <rect x="232" y="170" width="60" height="3" rx="2" fill="rgba(255,255,255,0.12)"/>
        <rect x="220" y="181" width="8" height="8" rx="2" fill="rgba(49,130,206,0.7)"/>
        <rect x="232" y="183" width="110" height="4" rx="2" fill="rgba(255,255,255,0.25)"/>
        <rect x="232" y="190" width="75" height="3" rx="2" fill="rgba(255,255,255,0.12)"/>
        <!-- bottom actions -->
        <rect x="72" y="228" width="110" height="28" rx="7" fill="rgba(196,150,42,0.85)"/>
        <text x="127" y="246" text-anchor="middle" fill="#fff" font-family="DM Sans" font-size="9" font-weight="700">View Dashboard â†’</text>
        <rect x="190" y="228" width="80" height="28" rx="7" fill="rgba(255,255,255,0.07)" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
        <text x="230" y="246" text-anchor="middle" fill="rgba(255,255,255,0.6)" font-family="DM Sans" font-size="9">Reports</text>
        <!-- pulse dot -->
        <circle cx="360" cy="240" r="5" fill="#38a169">
          <animate attributeName="r" values="5;7;5" dur="2s" repeatCount="indefinite"/>
          <animate attributeName="opacity" values="1;0.5;1" dur="2s" repeatCount="indefinite"/>
        </circle>
        <text x="348" y="258" text-anchor="middle" fill="rgba(56,161,105,0.8)" font-family="DM Sans" font-size="7">LIVE</text>
      </svg>
    </div>

    <div class="left-content">
      <h2 class="left-tagline">Your Gateway to<br><em>Smart Learning</em></h2>
      <p class="left-desc">Nepal's most complete academic management portal â€” connecting students, teachers & administrators.</p>
      <div class="left-pills">
        <span class="pill">ğŸ“Š Live Analytics</span>
        <span class="pill">ğŸ” Secure Access</span>
        <span class="pill">ğŸ“± Mobile Ready</span>
        <span class="pill">ğŸ’° eSewa Payments</span>
      </div>
    </div>
  </div>

  <!-- RIGHT: Login form -->
  <div class="login-right">
    <div class="login-right-header">
      <div class="login-badge">ğŸ” Secure Portal</div>
      <h1 class="login-title">Welcome back</h1>
      <p class="login-subtitle">Sign in to access your ShikshyaHub portal and manage your academic journey.</p>
    </div>

    <!-- Flash errors -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for cat, msg in messages %}
          <div class="error-alert">
            {% if cat == 'error' %}âš ï¸{% else %}â„¹ï¸{% endif %}
            {{ msg }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <!-- Demo credentials -->
    <div class="demo-block">
      <div class="demo-block-title">Quick Demo Access</div>
      <div class="demo-row">
        <span class="demo-role demo-role-admin">Admin</span>
        <span class="demo-cred">admin@shikshyahub.edu / Admin@123</span>
        <button class="demo-use-btn" onclick="fillLogin('admin@shikshyahub.edu','Admin@123')">Use</button>
      </div>
      <div class="demo-row">
        <span class="demo-role demo-role-teacher">Teacher</span>
        <span class="demo-cred">teacher@shikshyahub.edu / Teacher@123</span>
        <button class="demo-use-btn" onclick="fillLogin('teacher@shikshyahub.edu','Teacher@123')">Use</button>
      </div>
      <div class="demo-row">
        <span class="demo-role demo-role-student">Student</span>
        <span class="demo-cred">student@shikshyahub.edu / Student@123</span>
        <button class="demo-use-btn" onclick="fillLogin('student@shikshyahub.edu','Student@123')">Use</button>
      </div>
    </div>

    <!-- Login form -->
    <form method="POST" action="{{ url_for('login') }}" id="loginForm" autocomplete="on">
      <div class="form-group">
        <label class="form-label" for="email">Email Address</label>
        <div class="input-group">
          <span class="input-prefix">âœ‰ï¸</span>
          <input type="email" id="email" name="email" class="form-input"
                 placeholder="you@institution.edu" required autocomplete="email"
                 value="{{ request.form.get('email', '') }}">
        </div>
      </div>

      <div class="form-group">
        <label class="form-label" for="password">Password</label>
        <div class="input-group">
          <span class="input-prefix">ğŸ”’</span>
          <input type="password" id="password" name="password" class="form-input"
                 placeholder="Enter your password" required autocomplete="current-password">
          <button type="button" class="input-suffix" id="togglePwBtn" onclick="togglePw()">ğŸ‘ï¸</button>
        </div>
      </div>

      <div class="terms-row">
        <input type="checkbox" id="terms" name="terms" required>
        <label for="terms">
          I agree to ShikshyaHub's <a href="#" onclick="return false">Terms of Service</a>
          and <a href="#" onclick="return false">Privacy Policy</a>.
        </label>
      </div>

      <button type="submit" class="btn-submit" id="loginBtn">
        Sign In to Portal â†’
      </button>

      <div class="login-footer-links">
        <a href="{{ url_for('landing') }}">â† Home</a>
        <span class="login-footer-sep">Â·</span>
        <a href="#" onclick="return false">Forgot password?</a>
        <span class="login-footer-sep">Â·</span>
        <a href="#" onclick="return false">Help</a>
      </div>
    </form>
  </div>

</div>

<div class="page-footer">
  <span>Â© {{ current_year }} ShikshyaHub</span>
  <a href="#">Privacy</a>
  <a href="#">Terms</a>
  <a href="#">Support</a>
</div>

<script>
// â”€â”€ Theme persistence â”€â”€
(function() {
  const saved = localStorage.getItem('shikshyahub-theme') || 'light';
  document.documentElement.setAttribute('data-theme', saved);
  document.getElementById('themeToggle').textContent = saved === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
})();

document.getElementById('themeToggle').addEventListener('click', function() {
  const html = document.documentElement;
  const next = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', next);
  localStorage.setItem('shikshyahub-theme', next);
  this.textContent = next === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
});

// â”€â”€ Password toggle â”€â”€
function togglePw() {
  const input = document.getElementById('password');
  const btn   = document.getElementById('togglePwBtn');
  input.type  = input.type === 'password' ? 'text' : 'password';
  btn.textContent = input.type === 'password' ? 'ğŸ‘ï¸' : 'ğŸ™ˆ';
}

// â”€â”€ Fill demo credentials â”€â”€
function fillLogin(email, pwd) {
  document.getElementById('email').value = email;
  document.getElementById('password').value = pwd;
  document.getElementById('terms').checked = true;
  document.getElementById('email').focus();
}

// â”€â”€ Loading state on submit â”€â”€
document.getElementById('loginForm').addEventListener('submit', function(e) {
  const btn = document.getElementById('loginBtn');
  btn.textContent = 'â³ Signing in...';
  btn.disabled = true;
  // Re-enable after 6s in case of error
  setTimeout(() => {
    btn.disabled = false;
    btn.textContent = 'Sign In to Portal â†’';
  }, 6000);
});

// Inject current year (Jinja is not available for current_year in this standalone page)
</script>
</body>
</html>
