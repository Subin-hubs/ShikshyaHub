{% extends 'base.html' %}
{% block title %}Notices â€” ShikshyaHub{% endblock %}
{% block role_label %}Student Portal{% endblock %}
{% block page_title %}Notices{% endblock %}
{% block sidebar_nav %}
<div class="sidebar-section-label">Overview</div>
<a href="{{ url_for('student_dashboard') }}"><span class="nav-icon">ğŸ </span> Dashboard</a>
<div class="sidebar-section-label">Learning</div>
<a href="{{ url_for('student_subjects') }}"><span class="nav-icon">ğŸ“š</span> My Subjects</a>
<a href="{{ url_for('student_tasks') }}"><span class="nav-icon">ğŸ“</span> Tasks
  {% if notif_by_type.get('assignment') %}<span class="nav-badge">{{ notif_by_type['assignment'] }}</span>{% endif %}
</a>
<div class="sidebar-section-label">Academic</div>
<a href="{{ url_for('student_attendance') }}"><span class="nav-icon">âœ…</span> Attendance</a>
<a href="{{ url_for('student_results') }}"><span class="nav-icon">ğŸ“Š</span> Results
  {% if notif_by_type.get('result') %}<span class="nav-badge">{{ notif_by_type['result'] }}</span>{% endif %}
</a>
<a href="{{ url_for('student_timetable') }}"><span class="nav-icon">ğŸ“…</span> Timetable</a>
<div class="sidebar-section-label">Administration</div>
<a href="{{ url_for('student_notices') }}"><span class="nav-icon">ğŸ“¢</span> Notices
  {% if notif_by_type.get('notice') %}<span class="nav-badge">{{ notif_by_type['notice'] }}</span>{% endif %}
</a>
<a href="{{ url_for('student_fees') }}"><span class="nav-icon">ğŸ’°</span> Fees
  {% if notif_by_type.get('fee') %}<span class="nav-badge">{{ notif_by_type['fee'] }}</span>{% endif %}
</a>
<a href="{{ url_for('student_profile') }}"><span class="nav-icon">ğŸ‘¤</span> Profile</a>
{% endblock %}
{% block content %}
<div class="page-header"><div><h1>Notice Board</h1><p>{{ notices|length }} announcements</p></div></div>
<div style="display:flex;flex-direction:column;gap:14px;">
  {% for n in notices %}
  <div class="card">
    <div class="card-body">
      <div style="display:flex;align-items:flex-start;justify-content:space-between;gap:12px;">
        <div style="display:flex;gap:14px;flex:1;">
          <div style="width:42px;height:42px;border-radius:10px;background:var(--gold-pale);display:flex;align-items:center;justify-content:center;font-size:1.2rem;flex-shrink:0;">ğŸ“¢</div>
          <div>
            <div style="font-family:'Cormorant Garamond',serif;font-size:1.15rem;font-weight:700;color:var(--navy);margin-bottom:6px;">{{ n.title }}</div>
            <p style="font-size:.875rem;color:var(--text-secondary);line-height:1.65;margin-bottom:10px;">{{ n.content }}</p>
            <div style="font-size:.78rem;color:var(--text-light);">
              Posted by <strong>{{ n.posted_by_name or 'Admin' }}</strong> Â· {{ n.created_at[:10] }}
            </div>
          </div>
        </div>
        {% if n.audience=='all' %}<span class="badge badge-gold" style="flex-shrink:0;">General</span>{% else %}<span class="badge badge-info" style="flex-shrink:0;">Students</span>{% endif %}
      </div>
    </div>
  </div>
  {% else %}
  <div class="card" style="padding:48px;text-align:center;">
    <div style="font-size:3rem;opacity:.3;">ğŸ“¢</div>
    <p style="color:var(--text-light);margin-top:12px;">No notices yet.</p>
  </div>
  {% endfor %}
</div>
{% endblock %}
